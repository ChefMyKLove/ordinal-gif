<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: #000;
            font-family: 'Courier New', monospace;
            color: #fff;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .viewer {
            position: relative;
            width: 90vw;
            max-width: 600px;
            aspect-ratio: 1;
            margin-bottom: 20px;
        }
        
        #frame {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            image-rendering: pixelated;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        
        #frame.visible {
            opacity: 1;
        }
        
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.1);
            max-width: 600px;
            width: 90vw;
        }
        
        .control-row {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: #fff;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        button:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.4);
        }
        
        button:active {
            transform: scale(0.95);
        }
        
        input[type="range"] {
            flex: 1;
            min-width: 150px;
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: #fff;
            border-radius: 50%;
            cursor: pointer;
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: #fff;
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        
        label {
            font-size: 12px;
            color: rgba(255,255,255,0.7);
            min-width: 80px;
        }
        
        .value-display {
            font-size: 14px;
            color: #fff;
            min-width: 70px;
            text-align: right;
        }
        
        .title {
            font-size: 11px;
            color: rgba(255,255,255,0.5);
            text-align: center;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="viewer">
        <img id="frame" alt="Rainbow Animation">
    </div>
    
    <div class="controls">
        <div class="title">ORDINAL RAINBOW ANIMATION</div>
        
        <div class="control-row">
            <button id="playPause">⏸ PAUSE</button>
            <div class="value-display" id="frameCounter">1/8</div>
        </div>
        
        <div class="control-row">
            <label for="fpsSlider">SPEED:</label>
            <input type="range" id="fpsSlider" min="1" max="30" value="8">
            <span class="value-display" id="fpsDisplay">8 FPS</span>
        </div>
        
        <div class="control-row">
            <label for="fadeSlider">FADE:</label>
            <input type="range" id="fadeSlider" min="0" max="1000" value="300" step="50">
            <span class="value-display" id="fadeDisplay">300ms</span>
        </div>
    </div>
    
    <script>
        const frames = [
            '704a7653a4d8c4d7bf356e1d2aeb0f0349b91c7a34c6b7eee4b4b0f5ae054a33i0',
            '2056d7e53ca9eef2526cca04dc84695e195ab23f9edb8e58ae94a296a04f2f4bi0',
            '19a1e5047dcb0b91991007863b9112e121e374f2e24710bd7d06571706cb5182i0',
            '7def583d3dad15f9343f3189c7a8837a13e7615d6310453cf6268803b3704342i0',
            '88ef3f60165d06c5ef5810567d754714eeb4ff7039763b5b2af39e2a17903d22i0',
            '93f79b45ac8f5d1ef218bb67426aefe53458081010119a620a7bc77f220c74d3i0',
            'dc70aed2f7fc88695d100846b3f6e6273f82fc51c9e64b69b4ce59f5f07bd243i0',
            'd6dc7d95528657302d7fb1473002358323987dc468f833f53a34d0276c24b2d4i0'
        ];
        
        const apiBase = 'https://ordinals.gorillapool.io/api/files/inscriptions/';
        
        let currentFrame = 0;
        let fps = 8;
        let fadeDuration = 300;
        let interval;
        let isPlaying = true;
        
        const img = document.getElementById('frame');
        const fpsSlider = document.getElementById('fpsSlider');
        const fpsDisplay = document.getElementById('fpsDisplay');
        const fadeSlider = document.getElementById('fadeSlider');
        const fadeDisplay = document.getElementById('fadeDisplay');
        const playPauseBtn = document.getElementById('playPause');
        const frameCounter = document.getElementById('frameCounter');
        
        function updateFadeTransition() {
            img.style.transition = 'opacity ' + (fadeDuration / 1000) + 's ease-in-out';
        }
        
        function animate() {
            img.classList.remove('visible');
            
            setTimeout(function() {
                img.src = apiBase + frames[currentFrame];
                img.classList.add('visible');
                frameCounter.textContent = (currentFrame + 1) + '/' + frames.length;
                currentFrame = (currentFrame + 1) % frames.length;
            }, fadeDuration / 2);
        }
        
        function startAnimation() {
            if (interval) clearInterval(interval);
            const frameTime = Math.max(1000 / fps, fadeDuration);
            interval = setInterval(animate, frameTime);
        }
        
        fpsSlider.addEventListener('input', function(e) {
            fps = parseInt(e.target.value);
            fpsDisplay.textContent = fps + ' FPS';
            if (isPlaying) {
                startAnimation();
            }
        });
        
        fadeSlider.addEventListener('input', function(e) {
            fadeDuration = parseInt(e.target.value);
            fadeDisplay.textContent = fadeDuration + 'ms';
            updateFadeTransition();
            if (isPlaying) {
                startAnimation();
            }
        });
        
        playPauseBtn.addEventListener('click', function() {
            isPlaying = !isPlaying;
            if (isPlaying) {
                playPauseBtn.textContent = '⏸ PAUSE';
                startAnimation();
            } else {
                playPauseBtn.textContent = '▶ PLAY';
                clearInterval(interval);
            }
        });
        
        img.onload = function() {
            img.classList.add('visible');
        };
        
        img.onerror = function() {
            console.error('Failed to load image:', img.src);
            setTimeout(animate, 1000);
        };
        
        img.src = apiBase + frames[0];
        frameCounter.textContent = '1/' + frames.length;
        startAnimation();
    </script>
</body>
</html>